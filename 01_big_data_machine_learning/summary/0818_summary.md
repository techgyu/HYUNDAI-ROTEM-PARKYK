# 0818 요약 (상세 정리)

1. 기본 개념  
   - 검정통계량 ↑ ⇒ p-value ↓ (귀무가설 하 드문 값)  
   - 표본수 ↑ ⇒ 평균의 분포가 정규근사 (중심극한정리)  
   - 자유도(df) ↓ ⇒ t분포 꼬리 두터움 (보수적)  
   - t값 = (표본평균 − 가정평균) / 표준오차(SE)  
   - p-value는 “귀무가설이 참일 때 관측(또는 더 극단)될 확률”  
   - p>0.05가 바람직한 경우: 정규성 검정, 등분산성 검정 (가정 유지 원함)

2. crosstab / 카이제곱(χ²)  
   - pd.crosstab(): 범주형 교차빈도표(옵션: margins=True, normalize=)  
   - χ² 독립성 검정: 두 범주형 변수 관련성 여부(H0: 독립)  
   - 기대도수(Expected) = (행합 * 열합) / 총합  
   - 일반 권장: 모든 셀 기대도수 ≥ 5 (위배 많으면 범주 합치기 or Fisher exact (2×2))  
   - 해석 보강: 표준화 잔차(Standardized residual)로 어떤 셀이 기여했는지 확인

3. T-test vs ANOVA 선택  
   - 집단 2개 평균: t-test (단일/독립/대응)  
   - 집단 3개 이상 평균: ANOVA(F), 사후분석(Post-hoc: Tukey 등)  
   - Welch ANOVA: 등분산 위배 다집단

4. t-test 종류 및 가설·가정  
   4-1) 단일표본 t (one-sample)  
       - H0: μ = μ0  
       - 가정: (1) 표본 정규성 또는 n 충분히 큼 (2) 독립 관측  
       - 대안: 비모수 1-표본 Wilcoxon(중앙값 비교, SciPy엔 직접 X→ sign test/Wilcoxon 활용 변형)  
   4-2) 독립표본 t (independent)  
       - H0: μ1 = μ2  
       - 가정: (1) 두 집단 독립 (2) 각 집단 정규성 (3) 등분산(H0: σ1²=σ2²)  
       - 등분산 위배(p<0.05) ⇒ Welch t (equal_var=False)  
       - 정규성 위배/순위 비교 필요 ⇒ Mann-Whitney U (분포/중앙 경향 차이)  
   4-3) 대응표본 t (paired)  
       - H0: (후−전) 평균차 = 0  
       - 가정: (차이값) 정규성  
       - 위배 시 Wilcoxon signed-rank  
   4-4) “보정된 t” 언급 상황  
       - 공변량(나이, 성별 등) 영향 제거 필요 ⇒ ANCOVA / 회귀모형 사용 (단순 t-test 아님)  

5. 가정 검정 요약  
   - 정규성: Shapiro-Wilk(소표본), Kolmogorov-Smirnov(제약), QQ-plot 시각점검  
   - 등분산: Levene(일반적), Bartlett(정규성 민감)  
   - 독립성: 설계(실험/표본추출)에 의존 (통계적 검정보다 설계 타당성)  
   - 대응설계 여부: 동일 대상 반복측정인지 확인  

6. 효과크기 & 신뢰구간  
   - Cohen’s d (독립 t: (M1−M2)/Spooled, 대응 t: (차이평균/차이표준편차))  
     해석 경험칙: 0.2 작음 / 0.5 중간 / 0.8 큼  
   - 차이의 95% CI 포함 여부로 실질적 유의성 판단 보강  
   - 보고 형식 예: t(df)=값, p=값, d=값, 95% CI=[L, U]

7. 비모수 대안 대응표  
   - 단일(정규성 위배, 중앙값 관심): Sign test, 1-sample Wilcoxon 변형  
   - 독립 2집단: Mann-Whitney U (순위 기반)  
   - 대응: Wilcoxon signed-rank  
   - 분포/형태 크게 다르면 순위검정도 주의 (동일분포 가정 일부 존재)

8. 카이제곱 검정 유형  
   - 적합도(Goodness-of-fit): 단일 범주형 vs 기대분포(H0: 관측비율=기대비율)  
   - 독립성(Independence): 두 범주형 변수 교차표(H0: 독립)  
   - 동질성(Homogeneity): 여러 집단(행)이 동일 분포 갖는지(형식은 독립성과 유사)  
   - 효과크기: Cramer’s V (V=√(χ² / (n*(k-1))))  

9. T-test와 χ² 비교 핵심  
   - 종속변수 형태: t-test(연속형 평균), χ²(범주형 빈도)  
   - 통계량 구조: t = (차이 / 표준오차), χ² = Σ((O−E)²/E)  
   - 분포: t분포(df=n−1 또는 Welch 조정), χ²분포(df=(r−1)(c−1))  
   - 해석 보강: t ⇒ 효과크기(d); χ² ⇒ 잔차/효과크기(V)

10. 실무 체크리스트  
    1) 데이터 타입 확인 (연속 vs 범주)  
    2) 설계(독립/대응) 결정  
    3) 가정(정규/등분산) 점검  
    4) 적절한 검정 선택(t / Welch / 비모수 / χ²)  
    5) 통계량 + p + 효과크기 + CI 보고  
    6) 가정 위반 시 대안/보강(시각화, 비모수) 함께 제시  
    7) “기각 실패 = 동일함 증명” 아님 (추가 표본 검토)

11. 예시 간단 정리  
    - 남녀 키 평균 차이 ⇒ 독립 t (등분산 위배 시 Welch)  
    - 다이어트 전/후 체중 ⇒ 대응 t (차이 정규성 위배 ⇒ Wilcoxon)  
    - 성별 × 브랜드 선호 ⇒ χ² 독립성  
    - 관측된 색 분포 균등 여부 ⇒ χ² 적합도  

12. 흔한 오류  
    - χ²에 비율(%) 직접 사용 (X) ⇒ 반드시 원시카운트  
    - 기대도수 낮은 셀 무시 ⇒ Fisher / 범주 통합 필요  
    - 정규성만 기계적으로 p>0.05일 때까지 변환 반복 ⇒ 시각/효과크기 함께 고려  
    - p만 보고 효과크기 미보고 ⇒ 해석 불충분  

13. 용어 기타  
    - ORM: 기존 테이블 사용 시 managed=False  
    - 함수 반환: 파이썬은 객체 1개(튜플 등) 반환  
    - Roll-base: 역할(role) 기반 분류/분석 관점  

14. 참고 링크  
    - 추론통계 연습: https://cafe.daum.net/flowlife/SBU0/23  
    - 2개 집단 평균 비교: https://nittaku.tistory.com/459  

15. 핵심 한 줄 요약  
    - 평균 차이 ⇒ t/ANOVA, 빈도/비율 관계 ⇒ χ², 가정 위배 ⇒ Welch·비모수